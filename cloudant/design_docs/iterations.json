{
  "_id": "_design/iterations",
  "version": 0.2,
  "views": {
    "completed": {
      "map": "function (doc) {\n  if (doc.type == \"iterationinfo\" && (doc.doc_status === null || doc.doc_status != 'delete')) {\n    if (doc.iterationinfo_status == \"Completed\") {\n          emit(doc.iteration_end_dt, doc);\n    }\n  }\n} "
    },
    "teamIteration": {
      "map": "function (doc) {\r\n  if (doc.type == \"iterationinfo\" && (doc.doc_status === null || doc.doc_status != 'delete')) {\r\n    emit(doc.team_id, doc);\r\n  }\r\n} "
    },
    "rollUpData": {
      "map": "function (doc) {\r\n  if ((doc.type == \"roll_up_data\") && (doc.doc_status === null || doc.doc_status != 'delete')) {\r\n    emit(doc._id, doc);\r\n  }\r\n}"
    }
  },
  "language": "javascript",
  "indexes": {
    "searchAll": {
      "analyzer": "standard",
      "index": "function (doc) {\n  if (doc.type == \"iterationinfo\" && (doc.doc_status === null || doc.doc_status != 'delete')) {\n    index(\"default\", doc.team_id); \n    if (doc.iterationinfo_status) {\n      var completed = doc.iterationinfo_status.toUpperCase() == \"COMPLETED\" ? \"Y\" : \"N\";\n      index(\"completed\", completed, {\"store\": true, \"facet\": true});\n    }\n    if (doc.iteration_end_dt) {\n      var date = doc.iteration_end_dt.split(\"/\");\n      index(\"end_date\", parseInt(date[2]+date[0]+date[1]), {\"store\": true, \"facet\": true});\n    }\n    if (doc.iteration_name) {\n      index(\"name\", doc.iteration_name, {\"store\": true, \"facet\": true});\n    }\n    if (doc.team_id) {\n      index(\"team_id\", doc.team_id, {\"store\": true, \"facet\": true});\n    }\n  }\n}"
    }
  }
}
