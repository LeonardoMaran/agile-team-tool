{
  "_id": "_design/assessments",
  "version": 0.4,
  "views": {
    "template": {
      "map": "function (doc) {\r\n  if (doc.type == 'ref_matassessment')\r\n      emit(doc.atma_status, doc);\r\n}"
    },
    "teamMaturity": {
      "map": "function (doc) {\n  if (doc.type == 'matassessmtrslt'  && (doc.doc_status === null || doc.doc_status != 'delete'))\n    emit(doc.team_id, doc);\n}"
    },
    "rollUpData": {
      "map": "function (doc) {\n  if ((doc.type == \"assessment_roll_up_data\")) {\n    emit(doc._id, doc);\n  }\n}"
    },
    "submitted": {
      "map": "function (doc) {\n  if (doc.type == \"matassessmtrslt\" && (doc.doc_status === null || doc.doc_status != 'delete')) {\n    if (doc.assessmt_status == \"Submitted\") {\n          emit(doc[\"self-assessmt_dt\"], doc);\n    }\n  }\n} "
    }
  },
  "language": "javascript",
  "indexes": {
    "teamSearch": {
      "analyzer": "standard",
      "index": "function (doc) {\n  if (doc.type == 'matassessmtrslt' && (doc.doc_status === null || doc.doc_status != 'delete')) {\n    index(\"default\", doc.team_id);\n    var date = \"\";\n    if (doc.team_id) {\n      index(\"team_id\", doc.team_id, {\"store\": true, \"facet\": true});\n    }\n    if (doc.last_updt_user) {\n      index(\"last_updt_user\", doc.last_updt_user, {\"store\": true, \"facet\": true});\n    }\n    if (doc.created_dt) {\n      index(\"created_dt\", doc.created_dt, {\"store\": true, \"facet\": true});\n    }\n    if (doc[\"self-assessmt_dt\"]) {\n      index(\"self-assessmt_dt\", doc[\"self-assessmt_dt\"], {\"store\": true, \"facet\": true});\n    }\n    if (doc.assessmt_status) {\n      index(\"assessmt_status\", doc.assessmt_status, {\"store\": true, \"facet\": true});\n\t\t\tif (doc[\"assessmt_status\"].toLowerCase() == \"draft\") {\n        date = doc.created_dt.split(\"-\");\n        if (date.length == 1) {\n          date = doc.created_dt.split(\"/\");\n          date = parseInt(date[2]+date[0]+date[1]);\n        } else\n          date = parseInt(date[0]+date[1]+date[2]);\n        index(\"sort_dt\", date, {\"store\": true, \"facet\": true});\t\t\t  \n      } else if (doc[\"assessmt_status\"].toLowerCase() == \"submitted\") {\n        date = doc[\"self-assessmt_dt\"].split(\"-\");\n        if (date.length == 1) {\n          date = doc[\"self-assessmt_dt\"].split(\"/\");\n          date = parseInt(date[2]+date[0]+date[1]);\n        } else\n          date = parseInt(date[0]+date[1]+date[2]);\n        index(\"sort_dt\", date, {\"store\": true, \"facet\": true});\n      } else {\n        date = doc.created_dt.split(\"-\");\n        if (date.length == 1) {\n          date = doc.created_dt.split(\"/\");\n          date = parseInt(date[2]+date[0]+date[1]);\n        } else\n          date = parseInt(date[0]+date[1]+date[2]);\n        index(\"sort_dt\", date, {\"store\": true, \"facet\": true});\t\t\n      }\n    }\n  }\n}"
    }
  }
}